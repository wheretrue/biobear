# Create a smoketest that just installs the biobear python package and reads an example file

name: Smoke Test

on:
    workflow_dispatch:
    pull_request:
        branches:
            - main


jobs:
    test-package:
        runs-on: ${{ matrix.os }}
        strategy:
            matrix:
                os: [ubuntu-latest, macos-latest, windows-latest]
                python-version: [3.9]
        steps:
            # setup python
            - uses: actions/setup-python@v2
              with:
                  python-version: ${{ matrix.python-version }}

            - name: Install biobear
              run: |
                  python -m pip install --upgrade pip
                  pip install biobear

            - name: Install wget on windows
              if: ${{ matrix.os == 'windows-latest' }}
              run: |
                  choco install wget

            - name: Download example fasta file
              run: |
                wget -O test.fasta https://raw.githubusercontent.com/wheretrue/biobear/main/python/tests/data/test.fasta

            - name: Read example fasta file
              run: |
                python -c "from biobear import FastaReader; print(FastaReader('test.fasta').read())"
